export default function O(){var u,i,p,c,s,L,C,b=!1,I=!1,g=!1,m={x:0,y:0},d={x:0,y:0},l=1,v=[],y=10,M=!1,B=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},S=function(){var e=document.body;b&&I&&(i&&c?(u.appendChild(i),p=i.getContext("2d"),c.getContext("2d"),p.globalCompositeOperation="destination-out",y=c.width/2,window.PointerEvent?(i.addEventListener("pointerdown",x),e.addEventListener("pointerup",f),e.addEventListener("pointerleave",f),e.addEventListener("pointermove",E)):(i.addEventListener("mousedown",x),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",f),e.addEventListener("mousemove",E),i.addEventListener("touchstart",x),e.addEventListener("touchend",f),e.addEventListener("touchmove",E)),window.addEventListener("resize",D(A,200)),A(),window.requestAnimationFrame(T)):console.error("Failed to load ScratchIt image"))},T=function(){for(var e;v.length;)e=v.shift(),p.drawImage(c,e.x-c.width/2,e.y-c.height/2);window.requestAnimationFrame(T)},D=function(e,t,n){var o;return function(){var r=this,a=arguments,h=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(r,a)},t),h&&e.apply(r,a)}},A=function(){l=1/(u.getBoundingClientRect().width/i.width)},q=function(e,t){var n,o,r,a,h;if((t=!!t)&&s&&(n=s.x-e.x,o=s.y-e.y,(r=Math.sqrt(n*n+o*o))>y))for(n/=h=Math.ceil(r/y),o/=h,a=1;a<h;a++)v.push({x:Math.round(e.x+a*n),y:Math.round(e.y+a*o)});e={x:Math.round(e.x),y:Math.round(e.y)},s=e,v.push(e)},w=function(e){e.preventDefault(),e.cancelBubble=!0,e.stopPropagation()},x=function(e){w(e),g=!0,m=X(e),d=N(e),q({x:d.x*l,y:d.y*l})},E=function(e){if(g){w(e);var t=X(e);q({x:(d.x+(t.x-m.x))*l,y:(d.y+(t.y-m.y))*l},!0)}},f=function(e){g&&(w(e),g=!1,s=void 0,m={x:0,y:0},d={x:0,y:0},H())},H=function(){var e,t,n=0,o=i.width*i.height;if(!M){for(e=p.getImageData(0,0,i.width,i.height),t=0;t<e.data.length;t+=4)e.data[t+3]<=128&&n++;n/o*100>=L&&(C(),M=!0)}},X=function(e){return{x:e.targetTouches?e.targetTouches[0].clientX:e.clientX,y:e.targetTouches?e.targetTouches[0].clientY:e.clientY}},N=function(e){var t,n;if(e.target,typeof e.offsetX=="number")t=e.offsetX,n=e.offsetY;else if(e.originalEvent&&typeof e.originalEvent.layerX=="number")t=e.oritinalEvent.layerX,n=e.oritinalEvent.layerY;else{var o=i.getBoundingClientRect();t=e.touches[0].clientX-o.left,n=e.touches[0].clientY-o.top}return{x:t,y:n}},F=function(e,t){var n;typeof e=="string"&&typeof t=="function"?((n=new Image).onload=function(){var o;(o=navigator.appVersion).indexOf("MSIE")!==-1&&parseFloat(o.split("MSIE")[1])<=9?setTimeout(function(){t(Y(n))},300):t(Y(n))},n.onerror=function(){t(!1)},R(e)||(n.crossOrigin=""),n.src=e):t(!1)},R=function(e){var t=window.location;try{return new URL(e).origin===t.origin}catch(a){var n,o,r=document.createElement("A");return r.href=e,document.head.appendChild(r),r.href=r.href,n=(r.protocol+"//"+r.host).replace(/:\d+/,"").toLowerCase(),o=(t.protocol+"//"+t.host).replace(/:\d+/,"").toLowerCase(),document.head.removeChild(r),n===o}},Y=function(e){var t=document.createElement("CANVAS"),n=t.getContext("2d"),o=e.naturalWidth,r=e.naturalHeight;return t.width=o,t.height=r,n.drawImage(e,0,0,o,r),t};(function(e,t,n){u=e;var o=arguments.length>3?arguments[3]:function(){},r=arguments.length>4?1*arguments[4]:0;if(!B(u))throw'ScratchIt() requires parent element to be a valid DOM Element."';if(typeof o!="function")throw"ScratchIt() requires callback to be a function";if(r<0||r>100)throw"ScratchIt() requires threshold to be between 0-100";C=o,L=r,F(t,function(a){b=!0,i=a,S()}),F(n,function(a){I=!0,c=a,S()})}).apply(this,arguments)}O.isSupported=function(){var u=document.createElement("CANVAS");return!(typeof window.requestAnimationFrame!="function"||!u.getContext||!u.getContext("2d"))};
